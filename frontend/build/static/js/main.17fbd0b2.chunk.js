(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{38:function(t,e,n){},39:function(t,e,n){},64:function(t,e,n){"use strict";n.r(e);var c=n(9),s=n(10),r=n(12),o=n(11),a=n(1),i=n.n(a),j=n(21),u=n.n(j),h=(n(38),n(39),n(0)),l=function(t){var e=t.user;return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.username}),Object(h.jsx)("td",{children:e.first_name}),Object(h.jsx)("td",{children:e.last_name}),Object(h.jsx)("td",{children:e.email})]})},d=function(t){var e=t.users;return Object(h.jsxs)("table",{children:[Object(h.jsx)("th",{children:"username"}),Object(h.jsx)("th",{children:"first_name"}),Object(h.jsx)("th",{children:"last_name"}),Object(h.jsx)("th",{children:"email"}),e.map((function(t){return Object(h.jsx)(l,{user:t})}))]})},b=n(8),O=function(t){var e=t.project,n=t.deleteProject;return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.id}),Object(h.jsx)("td",{children:Object(h.jsx)(b.b,{to:"project/".concat(e.id),children:e.name})}),Object(h.jsx)("td",{children:e.link}),Object(h.jsx)("td",{children:e.users}),Object(h.jsx)("td",{children:Object(h.jsx)("button",{type:"button",onClick:function(){return n(e.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]})},p=function(t){var e=t.projects,n=t.deleteProject;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("table",{children:[Object(h.jsx)("th",{children:"id"}),Object(h.jsx)("th",{children:"name"}),Object(h.jsx)("th",{children:"link"}),Object(h.jsx)("th",{children:"users"}),Object(h.jsx)("th",{children:" "}),e.map((function(t){return Object(h.jsx)(O,{project:t,deleteProject:n})}))]}),Object(h.jsx)(b.b,{to:"/projects/create",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"})]})},x=n(2),f=function(t){var e=t.todo;return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.id}),Object(h.jsx)("td",{children:e.text}),Object(h.jsx)("td",{children:e.project}),Object(h.jsx)("td",{children:e.author})]})},g=function(t){var e=t.todos,n=Object(x.g)().id,c=e.filter((function(t){return t.project===parseInt(n)}));return Object(h.jsxs)("table",{children:[Object(h.jsx)("th",{children:"id"}),Object(h.jsx)("th",{children:"text"}),Object(h.jsx)("th",{children:"project"}),Object(h.jsx)("th",{children:"author"}),c.map((function(t){return Object(h.jsx)(f,{todo:t})}))]})},v=function(t){var e=t.todo,n=t.users;return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.id}),Object(h.jsx)("td",{children:e.text}),Object(h.jsx)("td",{children:e.project}),Object(h.jsx)("td",{children:n.find((function(t){return t.id===e.author})).username})]})},m=function(t){var e=t.todos,n=t.users;return Object(h.jsxs)("table",{children:[Object(h.jsx)("th",{children:"id"}),Object(h.jsx)("th",{children:"text"}),Object(h.jsx)("th",{children:"project"}),Object(h.jsx)("th",{children:"author"}),e.map((function(t){return Object(h.jsx)(v,{todo:t,users:n})}))]})},k=n(18),y=function(t){Object(r.a)(n,t);var e=Object(o.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).state={name:"",link:"",users:[]},s}return Object(s.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(k.a)({},t.target.name,t.target.value))}},{key:"handleUsersChange",value:function(t){if(t.target.selectedOptions){for(var e=[],n=0;n<t.target.selectedOptions.length;n++)e.push(t.target.selectedOptions.item(n).value);this.setState({users:e})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(t){console.log(this.state.name),console.log(this.state.link),console.log(this.state.users),this.props.createProject(this.state.name,this.state.link,this.state.users),t.preventDefault()}},{key:"render",value:function(){var t=this;return Object(h.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(h.jsx)("input",{type:"text",name:"name",placeholder:"name",value:this.state.name,onChange:function(e){return t.handleChange(e)}}),Object(h.jsx)("input",{type:"text",name:"link",placeholder:"link",value:this.state.link,onChange:function(e){return t.handleChange(e)}}),Object(h.jsx)("select",{multiple:!0,name:"users",onChange:function(e){return t.handleUsersChange(e)},children:this.props.users.map((function(t){return Object(h.jsx)("option",{value:t.id,children:t.username})}))}),Object(h.jsx)("input",{type:"submit",value:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})}}]),n}(i.a.Component),_=n(13),C=n.n(_),S=function(t){Object(r.a)(n,t);var e=Object(o.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).state={login:[],password:[]},s}return Object(s.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(k.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){t.preventDefault(),this.props.get_token(this.state.login,this.state.password)}},{key:"render",value:function(){var t=this;return Object(h.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(h.jsx)("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(e){return t.handleChange(e)}}),Object(h.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(e){return t.handleChange(e)}}),Object(h.jsx)("input",{type:"submit",value:"Login"})]})}}]),n}(i.a.Component),w=n(17),P=function(t){var e=t.location;return Object(h.jsxs)("div",{children:["\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 ",e.pathname," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"]})},F=function(t){Object(r.a)(n,t);var e=Object(o.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).state={users:[],projects:[],todos:[],token:""},s}return Object(s.a)(n,[{key:"get_token_from_storage",value:function(){var t=new w.a;this.setState({token:t.get("token")},this.get_data)}},{key:"get_headers",value:function(){var t={"Content-Type":"application/json"},e=new w.a;return t.Authorization="Token "+e.get("token"),t}},{key:"get_data",value:function(){var t=this,e=this.get_headers();C.a.get("http://127.0.0.1:8000/api/users",{headers:e}).then((function(e){var n=e.data;t.setState({users:n.results})})).catch((function(e){t.setState({users:[]}),console.log(e)})),C.a.get("http://127.0.0.1:8000/api/projects",{headers:e}).then((function(e){var n=e.data;t.setState({projects:n.results})})).catch((function(e){t.setState({projects:[]}),console.log(e)})),C.a.get("http://127.0.0.1:8000/api/todo",{headers:e}).then((function(e){var n=e.data;t.setState({todos:n.results})})).catch((function(e){t.setState({todos:[]}),console.log(e)}))}},{key:"componentDidMount",value:function(){this.get_token_from_storage()}},{key:"get_token",value:function(t,e){var n=this;C.a.post("http://127.0.0.1:8000/api-token-auth/",{username:t,password:e}).then((function(t){localStorage.setItem("token",t.data.token);var e=new w.a;e.set("token",t.data.token),console.log(e.get("token")),n.setState({token:t.data.token},n.get_data)})).catch((function(t){return console.log(t)}))}},{key:"is_authenticated",value:function(){return!!this.state.token}},{key:"logout",value:function(){(new w.a).set("token",""),this.setState({token:""},this.get_data)}},{key:"deleteProject",value:function(t){var e=this,n=this.get_headers();C.a.delete("http://127.0.0.1:8000/api/projects/".concat(t),{headers:n}).then((function(t){e.get_data()})).catch((function(t){console.log(t)}))}},{key:"createProject",value:function(t,e,n){var c=this;if(t&&e&&0!=n.length){var s=this.get_headers(),r={name:t,link:e,users:n};C.a.post("http://127.0.0.1:8000/api/projects/",r,{headers:s}).then((function(t){c.get_data()})).catch((function(t){console.log(t)}))}else console.log("\u043d\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432")}},{key:"render",value:function(){var t=this;return Object(h.jsx)("div",{children:Object(h.jsxs)(b.a,{children:[Object(h.jsx)("nav",{children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsx)(b.b,{to:"/",children:"Users"})}),Object(h.jsx)("li",{children:Object(h.jsx)(b.b,{to:"/projects",children:"Projects"})}),Object(h.jsx)("li",{children:Object(h.jsx)(b.b,{to:"/todo",children:"Todo"})}),Object(h.jsx)("li",{children:this.is_authenticated()?Object(h.jsx)("button",{onClick:function(){return t.logout()},children:"Logout"}):Object(h.jsx)(b.b,{to:"/login",children:"Login"})})]})}),Object(h.jsxs)(x.d,{children:[Object(h.jsx)(x.b,{exact:!0,path:"/",component:function(){return Object(h.jsx)(d,{users:t.state.users})}}),Object(h.jsx)(x.b,{exact:!0,path:"/projects/create",component:function(){return Object(h.jsx)(y,{users:t.state.users,createProject:function(e,n,c){return t.createProject(e,n,c)}})}}),Object(h.jsx)(x.b,{exact:!0,path:"/projects",component:function(){return Object(h.jsx)(p,{projects:t.state.projects,deleteProject:function(e){return t.deleteProject(e)}})}}),Object(h.jsx)(x.b,{exact:!0,path:"/todo",component:function(){return Object(h.jsx)(m,{todos:t.state.todos,users:t.state.users})}}),Object(h.jsx)(x.b,{exact:!0,path:"/login",component:function(){return Object(h.jsx)(S,{get_token:function(e,n){return t.get_token(e,n)}})}}),Object(h.jsx)(x.b,{exact:!0,path:"/project/:id",children:Object(h.jsx)(g,{todos:this.state.todos})}),Object(h.jsx)(x.a,{from:"/users",to:"/"}),Object(h.jsx)(x.b,{component:P})]})]})})}}]),n}(i.a.Component),I=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(e){var n=e.getCLS,c=e.getFID,s=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),c(t),s(t),r(t),o(t)}))};u.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(F,{})}),document.getElementById("root"));var L=function(t){Object(r.a)(n,t);var e=Object(o.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(h.jsx)("h2",{children:"Footer"})}}]),n}(i.a.Component);u.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(L,{})}),document.getElementById("footer")),I()}},[[64,1,2]]]);
//# sourceMappingURL=main.17fbd0b2.chunk.js.map